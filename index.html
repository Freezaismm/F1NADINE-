<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Nadine's Midnight Drive: Legend Edition üèéÔ∏è‚ú®</title>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <style>
        :root { --p: #ff007f; --y: #f1c40f; --b: #00d4ff; --w: #ffffff; }
        * { box-sizing: border-box; touch-action: manipulation; image-rendering: pixelated; }
        body { margin: 0; background: #000; font-family: 'Press Start 2P', cursive; color: #fff; overflow: hidden; height: 100vh; }
        
        #game-container { width: 100%; max-width: 420px; height: 100vh; margin: auto; position: relative; background: #050505; overflow: hidden; border: 4px solid #222; }

        /* --- FRONT PAGE LAYOUT IMPROVED --- */
        .ovr { 
            position: absolute; 
            inset: 0; 
            background: radial-gradient(circle at center, #1a1a2e 0%, #0f0c29 50%, #000 100%); 
            z-index: 1000; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            justify-content: center; 
            padding: 20px; 
            text-align: center; 
        }

        .game-title { 
            font-size: 16px; 
            color: var(--y); 
            text-shadow: 0 0 10px var(--p), 3px 3px 0px #000; 
            line-height: 1.6; 
            margin-top: -20px;
            margin-bottom: 35px; 
            letter-spacing: 2px;
            animation: titleGlow 1.5s infinite alternate;
        }

        /* SLOT FOTO KOTAK HD */
        .photo-slot {
            width: 160px;
            height: 160px;
            background: #222;
            border: 4px solid var(--w);
            border-radius: 20px; /* Sudut kotak yang elegan */
            overflow: hidden;
            position: relative;
            margin-bottom: 40px;
            box-shadow: 0 0 0 4px rgba(255, 0, 127, 0.3), 0 0 30px rgba(255, 0, 127, 0.5);
            transition: 0.3s;
        }

        .photo-slot::after {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(to bottom, transparent 60%, rgba(0,0,0,0.6));
        }

        .photo-slot img { 
            width: 100%; 
            height: 100%; 
            object-fit: cover; 
        }

        /* TOMBOL START PREMIUM */
        .start-btn {
            padding: 18px 40px;
            background: var(--p);
            border: none;
            color: #fff;
            font-family: 'Press Start 2P';
            font-size: 10px;
            border-radius: 12px;
            cursor: pointer;
            box-shadow: 0 6px 0 #9d004e, 0 10px 20px rgba(255, 0, 127, 0.4);
            transition: 0.1s;
            text-transform: uppercase;
        }

        .start-btn:active {
            transform: translateY(4px);
            box-shadow: 0 2px 0 #9d004e;
        }

        /* ANIMASI */
        @keyframes titleGlow {
            from { transform: scale(1); opacity: 0.9; }
            to { transform: scale(1.05); opacity: 1; text-shadow: 0 0 20px var(--p), 4px 4px 0px #000; }
        }

        /* --- END OF FRONT PAGE LAYOUT --- */
        
        /* GAMEPLAY */
        #road { position: absolute; width: 100%; height: 100%; background: #1a1a1a; }
        .lane-mark { position: absolute; width: 8px; height: 60px; background: rgba(255,255,255,0.2); left: 50%; transform: translateX(-50%); }
        .side-line { position: absolute; width: 10px; height: 100%; background: var(--p); opacity: 0.3; }
        
        #player { position: absolute; width: 45px; height: 80px; font-size: 45px; display: flex; align-items: center; justify-content: center; z-index: 100; text-shadow: 0 0 15px var(--b); }
        .enemy { position: absolute; width: 40px; height: 75px; font-size: 40px; z-index: 50; filter: drop-shadow(0 0 5px red); }
        .powerup { position: absolute; width: 35px; height: 35px; font-size: 30px; z-index: 60; filter: drop-shadow(0 0 10px var(--y)); }

        /* HUD & LVL */
        #hud { position: absolute; top: 10px; width: 100%; display: flex; flex-direction: column; align-items: center; gap: 5px; z-index: 200; }
        .stats-row { display: flex; gap: 10px; }
        .stat-box { background: rgba(0,0,0,0.8); padding: 6px 12px; border: 1px solid var(--b); border-radius: 4px; font-size: 7px; }
        #level-up-alert { position: absolute; top: 40%; width: 100%; text-align: center; color: var(--y); font-size: 15px; display: none; z-index: 300; text-shadow: 2px 2px #000; }

        /* CONTROLS */
        #controls { position: absolute; bottom: 30px; width: 100%; display: flex; justify-content: space-around; z-index: 500; }
        .ctrl-btn { width: 90px; height: 90px; background: rgba(255,255,255,0.05); border: 3px solid var(--w); color: var(--w); font-family: 'Press Start 2P'; border-radius: 50%; backdrop-filter: blur(5px); box-shadow: 0 0 15px rgba(255,255,255,0.2); }
        .ctrl-btn:active { background: var(--p); transform: scale(0.9); }

        /* WIN SCREEN */
        #win { display: none; flex-direction: column; justify-content: flex-start; padding-top: 50px; }
        #win-txt { background: rgba(0,0,0,0.9); border: 2px solid var(--y); padding: 20px; font-size: 8px; line-height: 2; text-align: left; overflow-y: auto; max-height: 60vh; margin: 20px 0; border-radius: 10px; }
    </style>
</head>
<body>

<div id="game-container">
    <div id="start-screen" class="ovr">
        <div class="game-title">NADINE:<br>THE F1 DRIVER ü©∑</div>
        
        <div class="photo-slot">
            <img src="https://img.sanishtech.com/u/c378ef1cf78046741f07521d13492a92.png" alt="Nadine">
        </div>

        <div class="stat-box" style="margin-bottom: 20px;">Made for : my little princess</div>
        <button onclick="startGame()" style="padding: 15px 30px; background: var(--p); border: none; color: #fff; font-family: 'Press Start 2P'; border-radius: 8px; cursor: pointer;">START RACE</button>
    </div>

    <div id="level-up-alert">LEVEL UP! SEMANGATT üöÄ</div>

    <div id="road">
        <div class="side-line" style="left: 0;"></div>
        <div class="side-line" style="right: 0;"></div>
        <div id="player">üèéÔ∏è</div>
    </div>

    <div id="hud">
        <div class="stats-row">
            <div class="stat-box">DIST: <span id="dist">0</span></div>
            <div class="stat-box">LVL: <span id="lvl">1</span></div>
        </div>
        <div class="stat-box">SPD: <span id="speed">0</span> km/h</div>
    </div>

    <div id="controls">
        <button class="ctrl-btn" onpointerdown="move(-1)" onpointerup="stopMove()"><</button>
        <button class="ctrl-btn" onpointerdown="move(1)" onpointerup="stopMove()">></button>
    </div>

    <div id="win" class="ovr">
        <h2 style="color:var(--y); font-size: 12px; text-shadow: 2px 2px #000;">WOWWW FINISHH SEMPURNAAAüèÅ</h2>
        <div id="win-txt"></div>
        <button onclick="location.reload()" style="background: var(--b); border: none; padding: 12px; color: #fff; font-family: 'Press Start 2P'; font-size: 8px; border-radius: 5px;">NEW DRIVE</button>
    </div>
</div>

<script>
    let audioCtx, playerX = 180, distance = 0, speed = 5, level = 1, active = false;
    let lanes = [], enemies = [], powerups = [], moveDir = 0;
    const road = document.getElementById('road');

    function initAudio() {
        audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    }

    function playSound(f, d, t = 'triangle', v = 0.1) {
        if(!audioCtx) return;
        let o = audioCtx.createOscillator(), g = audioCtx.createGain();
        o.type = t; o.frequency.value = f;
        g.gain.setValueAtTime(v, audioCtx.currentTime);
        g.gain.exponentialRampToValueAtTime(0.0001, audioCtx.currentTime + d);
        o.connect(g); g.connect(audioCtx.destination);
        o.start(); o.stop(audioCtx.currentTime + d);
    }

    function startGame() {
        initAudio();
        document.getElementById('start-screen').style.display = 'none';
        active = true;
        createLanes();
        gameLoop();
        autoSpawn();
    }

    function createLanes() {
        for(let i = 0; i < 12; i++) {
            let l = document.createElement('div');
            l.className = 'lane-mark';
            l.y = i * 80;
            l.style.top = l.y + 'px';
            road.appendChild(l);
            lanes.push(l);
        }
    }

    function move(dir) { moveDir = dir; }
    function stopMove() { moveDir = 0; }

    function autoSpawn() {
        if(!active) return;
        spawnEnemy();
        // Spawn rate makin cepat sesuai level
        let nextSpawn = Math.max(400, 1600 - (level * 200));
        setTimeout(autoSpawn, nextSpawn);
    }

    function spawnEnemy() {
        if(!active) return;
        let cars = ['üöò', 'üöî', 'üöö', 'üöê', 'üöï'];
        let e = { 
            x: Math.random() * (window.innerWidth - 80) + 20, 
            y: -100, 
            type: cars[Math.floor(Math.random() * cars.length)],
            el: document.createElement('div') 
        };
        e.el.className = 'enemy';
        e.el.innerText = e.type;
        road.appendChild(e.el);
        enemies.push(e);
    }

    function spawnPowerup() {
        if(!active) return;
        let p = { x: Math.random() * (window.innerWidth - 80) + 20, y: -100, el: document.createElement('div') };
        p.el.className = 'powerup';
        p.el.innerText = '‚ö°';
        road.appendChild(p.el);
        powerups.push(p);
    }
    // Spawn powerup terpisah
    setInterval(() => { if(active) spawnPowerup(); }, 6000);

    function gameLoop() {
        if(!active) return;

        // Level Up Logic
        let oldLvl = level;
        level = Math.floor(distance / 500) + 1;
        if(level > oldLvl) {
            document.getElementById('lvl').innerText = level;
            showLevelAlert();
            playSound(440, 0.5, 'sine', 0.2);
            speed += 1.5;
        }

        // Road Animation
        lanes.forEach(l => {
            l.y += speed;
            if(l.y > window.innerHeight) l.y = -80;
            l.style.top = l.y + 'px';
        });

        // Player Control
        playerX += moveDir * (7 + level);
        playerX = Math.max(15, Math.min(window.innerWidth - 60, playerX));
        document.getElementById('player').style.left = playerX + 'px';
        document.getElementById('player').style.top = (window.innerHeight - 180) + 'px';

        // Stats Update
        distance += 1;
        document.getElementById('dist').innerText = distance;
        document.getElementById('speed').innerText = Math.floor(speed * 25);

        // Enemy Logic
        enemies.forEach((e, i) => {
            e.y += speed + (level * 0.5);
            e.el.style.top = e.y + 'px';
            e.el.style.left = e.x + 'px';

            // Collision Box
            if(Math.abs(e.y - (window.innerHeight - 180)) < 60 && Math.abs(e.x - playerX) < 35) {
                gameOver();
            }

            if(e.y > window.innerHeight) {
                e.el.remove();
                enemies.splice(i, 1);
            }
        });

        // Powerup Logic
        powerups.forEach((p, i) => {
            p.y += speed;
            p.el.style.top = p.y + 'px';
            p.el.style.left = p.x + 'px';

            if(Math.abs(p.y - (window.innerHeight - 180)) < 50 && Math.abs(p.x - playerX) < 40) {
                playSound(880, 0.3, 'sine', 0.2);
                distance += 300;
                p.el.remove();
                powerups.splice(i, 1);
            }
            if(p.y > window.innerHeight) { p.el.remove(); powerups.splice(i, 1); }
        });

        if(distance >= 2800) winGame();
        else requestAnimationFrame(gameLoop);
    }

    function showLevelAlert() {
        const el = document.getElementById('level-up-alert');
        el.style.display = 'block';
        setTimeout(() => el.style.display = 'none', 1500);
    }

    function gameOver() {
        active = false;
        playSound(100, 0.8, 'sawtooth', 0.3);
        alert("NOOOOO!!!! ITS OKEYY SAYANGG BISA COBA LAGIII YAAAA");
        location.reload();
    }

    function winGame() {
        active = false;
        
        // --- MELODI KEMENANGAN PANJANG (Arpeggio Piano) ---
        // Urutan nada: Do - Mi - Sol - Do (High) - Mi (High) - Sol (High)
        const victoryMelody = [
            {f: 261.63, d: 0.4}, // C4
            {f: 329.63, d: 0.4}, // E4
            {f: 392.00, d: 0.4}, // G4
            {f: 523.25, d: 0.4}, // C5
            {f: 659.25, d: 0.4}, // E5
            {f: 783.99, d: 1.0}, // G5 (Nada panjang di akhir)
        ];

        victoryMelody.forEach((note, index) => {
            setTimeout(() => {
                playSound(note.f, note.d, 'sine', 0.2);
            }, index * 300); // Jeda antar nada 0.3 detik
        });
        // --------------------------------------------------

        document.getElementById('win').style.display = 'flex';
        
        const txt = `WAWW DUDUDUDDUUU NADINE VERSTAPENNNüèéÔ∏è‚ú®\n\nwihhh kerennn memang racing bangett kamu ini anaknyaaa, racing dan suka gamee pasti ezz lah maininn iniii yaaaa sayangggg...\n\nokaayydeee aku mau berterimakasihh nihh buat harii iniii.. terimakasihh karenaa udaa banyak nemenin ak hari inii, nemenin di sekolaahh bisaa bercabda bareng di sekolaaa, nugas bareng di sekolaaa, dann sampaii kamu nganterinn ak pulangg ke rumahhh.. makasihh banyakk yaaa, aku uda banyak ngrepotinn kamuuu ihhh.. apresiasi setinggi tingginyaa buat kamu pokoknyaaaa maahhh.. \n\ntapiii aku juga mau mintaa maaff karena hari ini aku banyak salahnyaa ke kamuu.. dari yang marah marah terusss, nangis teruss,.ngambekannn dan masih banyak hal lain lagi yangg aku lakukan dan membuat kamu kesall.. minta maaf jugaa yaa karena ngrepotin kamu dan mamahmu malah buatin ekonominyaaa, maaf yaaa aku ga bermaksud ngrepotinn sumpahh dari awall.. minta maaf yaaa nadd.. semogaa kebaikanmu, kebaikan mamahmuu bisa di ganti dengan yang jauh lebih baik yaaa.. maaf kalau aku belum bisa sepenuhnya mengganti kebaikan kalian sekeluarga yaaaa..\n\nSemogaa dengan semua kebaikan yang kamu sudah lakukan kee semua orangg termasuk aku yang paling banyak ngrepotinnn.. bisa membawa kamu ke pintu suksess yaaa.. dengan semua yang kamu berikann, kamu sudah pasti akan menjadii orangg yang sangatt suksess baik itu di dunia maupun di akhirattt.. doainn aku suksess yaa anak baikkk.. nanti kalau aku berhasil aku boleh minta satu hal gaa?? pelukk aku yaa kalau aku udaa berhasil mendapatkannhal yang luar biasaa... ineedyourhug naddd.. aku pengen ada di tempat yang hangat ketika aku suksess...\n\nyasudaaa segini dulu ajaa yaaaa.. terimakasihh sebanyak banyakknyaa buat hari ini yaa sayanggg.. semogaa hari ini kamu di lancarkann semuanyaa yaaa.. goodmorningg my little sunshineeeee... kitaa ketemuu yaa hari inii, alhamdulillah dehhh.. pokoknyaa hari ini aku jaminn kamu bakall senengg dehhh... wkkwkwkwkw. okeyydeeee aku lanjut boboo dulu yaaa sayanggg.. see uu nantii yaakk semogaa hari ini beneran seruuuu.. paipaiiii paipaiii je t'aimeee bieennn sayangggg üíôü©µüíôü©µüíôü©µüíôü©µüíô`;
        
        let i = 0;
        document.getElementById('win-txt').innerHTML = ""; // Pastikan kosong dulu
        function type() {
            if(i < txt.length) {
                document.getElementById('win-txt').innerHTML += txt[i] === '\n' ? '<br>' : txt[i];
                i++; 
                // Suara ketikan halus biar makin HD
                if(i % 3 === 0) playSound(1200, 0.05, 'sine', 0.02);
                setTimeout(type, 50);
            }
        }
        setTimeout(type, 2000); // Mulai ngetik setelah melodi selesai
    }
</script>
</body>
</html>
